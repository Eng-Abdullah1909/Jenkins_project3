pipeline {
  environment {
    registry = "engabdullah1909/my-repo"
    registryCredential = 'Docker-Hub-UP'
    // dockrImage=''      // we can use this  + line 14 instead of line 13 (def)
  }
  agent none

        stages {
            stage('Building image') {
                agent any
                steps{
                    script {
                    def dockerImage = docker.build("$registry:$env.BUILD_NUMBER")     // env. check Jenkins syntax (Global Variable Reference)
                    // dockerImage = docker.build("$registry:$env.BUILD_NUMBER")
                    }
            }
            }

          // remove any created images on local to avoid cashing problems
             stage('Remove Unused docker image') {
                 steps{
                     sh "docker rmi $registry:$BUILD_NUMBER"
                 }
             }
        }
}
